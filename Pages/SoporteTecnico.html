<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Soporte Técnico y Asistencia - ITS Jerez</title>
  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
    }
    .card {
      margin-bottom: 20px;
    }
    .status-badge {
      font-size: 0.9em;
    }
  </style>
</head>
<body>

<div class="container">
  <h1 class="mt-4">Soporte Técnico y Asistencia</h1>
  <p>Si necesitas ayuda con la plataforma, completa el formulario a continuación para recibir asistencia técnica.</p>

  <!-- Formulario de solicitud de soporte -->
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Solicitud de Soporte</h5>
      <form id="formSoporte">
        <div class="form-group">
          <label for="tipoProblema">Tipo de Problema</label>
          <select class="form-control" id="tipoProblema" required>
            <option value="Acceso">Problemas de Acceso</option>
            <option value="Funciones">Funciones de la Plataforma</option>
            <option value="Rendimiento">Rendimiento Lento</option>
            <option value="Otro">Otro</option>
          </select>
        </div>
        <div class="form-group">
          <label for="descripcionProblema">Descripción del Problema</label>
          <textarea class="form-control" id="descripcionProblema" rows="4" placeholder="Describe tu problema aquí" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Enviar Solicitud</button>
      </form>
    </div>
  </div>

  <!-- Historial de solicitudes de soporte -->
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Historial de Solicitudes de Soporte</h5>
      <ul class="list-group" id="listaSoporte">
        <li class="list-group-item">No hay solicitudes de soporte enviadas.</li>
      </ul>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Script para gestionar las solicitudes de soporte -->
<script>
  const solicitudesSoporte = [];

  // Función para mostrar el historial de soporte
  function mostrarHistorial() {
    const listaSoporte = document.getElementById('listaSoporte');
    listaSoporte.innerHTML = ''; // Limpiar la lista

    if (solicitudesSoporte.length === 0) {
      listaSoporte.innerHTML = '<li class="list-group-item">No hay solicitudes de soporte enviadas.</li>';
    } else {
      solicitudesSoporte.forEach((solicitud, index) => {
        const item = document.createElement('li');
        item.classList.add('list-group-item');
        item.innerHTML = `
          <h6>${solicitud.tipoProblema}</h6>
          <p>${solicitud.descripcion}</p>
          <span class="badge badge-${solicitud.estado === 'Pendiente' ? 'warning' : solicitud.estado === 'En Proceso' ? 'info' : 'success'} status-badge">${solicitud.estado}</span>
          <button class="btn btn-sm btn-link" onclick="actualizarEstado(${index})">Actualizar Estado</button>
        `;
        listaSoporte.appendChild(item);
      });
    }
  }

  // Función para enviar una solicitud de soporte
  document.getElementById('formSoporte').addEventListener('submit', function(e) {
    e.preventDefault();

    const tipoProblema = document.getElementById('tipoProblema').value;
    const descripcionProblema = document.getElementById('descripcionProblema').value;

    const nuevaSolicitud = {
      tipoProblema,
      descripcion: descripcionProblema,
      estado: 'Pendiente'
    };

    solicitudesSoporte.push(nuevaSolicitud);
    mostrarHistorial();

    document.getElementById('formSoporte').reset();
  });

  // Función para actualizar el estado de una solicitud
  function actualizarEstado(index) {
    const solicitud = solicitudesSoporte[index];
    if (solicitud.estado === 'Pendiente') {
      solicitud.estado = 'En Proceso';
    } else if (solicitud.estado === 'En Proceso') {
      solicitud.estado = 'Resuelto';
    }
    mostrarHistorial();
  }

  // Inicializar historial al cargar la página
  mostrarHistorial();
</script>

</body>
</html>
<!--// Endpoint para crear una solicitud de soporte
app.post('/api/soporte', (req, res) => {
  const solicitud = req.body;
  // Guardar solicitud en la base de datos
  res.json({ message: 'Solicitud de soporte creada', solicitud });
});

// Endpoint para obtener historial de solicitudes
app.get('/api/soporte', (req, res) => {
  // Consultar solicitudes en la base de datos
  res.json(solicitudesSoporte);
});

// Endpoint para actualizar el estado de una solicitud
app.put('/api/soporte/:id', (req, res) => {
  const id = req.params.id;
  const { estado } = req.body;
  // Actualizar estado de la solicitud en la base de datos
  res.json({ message: 'Estado actualizado' });
});
-->