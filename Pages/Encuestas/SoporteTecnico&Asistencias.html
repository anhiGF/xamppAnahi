<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Soporte Técnico y Asistencia - ITS Jerez</title>
  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
    }
    .main-content {
      margin-top: 20px;
    }
    .card {
      margin-bottom: 20px;
    }
    .status-pending {
      color: orange;
    }
    .status-in-progress {
      color: blue;
    }
    .status-resolved {
      color: green;
    }
  </style>
</head>
<body>

<div class="container">
  <h1 class="mt-4">Soporte Técnico y Asistencia</h1>
  <p>Solicita ayuda en caso de problemas técnicos o dificultades con las herramientas de la plataforma.</p>

  <!-- Formulario de solicitud de soporte -->
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Enviar Solicitud de Soporte</h5>
      <form id="formSoporte">
        <div class="form-group">
          <label for="tipoProblema">Tipo de Problema</label>
          <select class="form-control" id="tipoProblema" required>
            <option value="plataforma">Problema con la Plataforma</option>
            <option value="integracion">Problema con Integraciones</option>
            <option value="cuenta">Problema con la Cuenta</option>
            <option value="otro">Otro</option>
          </select>
        </div>
        <div class="form-group">
          <label for="descripcionProblema">Descripción del Problema</label>
          <textarea class="form-control" id="descripcionProblema" rows="4" placeholder="Describe el problema detalladamente" required></textarea>
        </div>
        <div class="form-group">
          <label for="nivelUrgencia">Nivel de Urgencia</label>
          <select class="form-control" id="nivelUrgencia" required>
            <option value="baja">Baja</option>
            <option value="media">Media</option>
            <option value="alta">Alta</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary">Enviar Solicitud</button>
      </form>
    </div>
  </div>

  <!-- Historial de solicitudes -->
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Historial de Soporte</h5>
      <div id="historialSoporte">
        <!-- Aquí se mostrarán las solicitudes anteriores -->
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Script para manejar solicitudes de soporte -->
<script>
  const solicitudesSoporte = [];

  // Función para mostrar el historial de solicitudes de soporte
  function mostrarHistorial() {
    const historial = document.getElementById('historialSoporte');
    historial.innerHTML = ''; // Limpiar el historial

    solicitudesSoporte.forEach((solicitud, index) => {
      const item = document.createElement('div');
      item.classList.add('mb-3');
      const estadoClase = solicitud.estado === 'pendiente' ? 'status-pending' :
                          solicitud.estado === 'en proceso' ? 'status-in-progress' : 'status-resolved';
      item.innerHTML = `
        <h6>Solicitud ${index + 1} - <span class="${estadoClase}">${solicitud.estado.toUpperCase()}</span></h6>
        <p><strong>Tipo:</strong> ${solicitud.tipo}</p>
        <p><strong>Descripción:</strong> ${solicitud.descripcion}</p>
        <p><strong>Urgencia:</strong> ${solicitud.urgencia}</p>
        ${solicitud.respuesta ? `<p><strong>Respuesta:</strong> ${solicitud.respuesta}</p>` : ''}
      `;
      historial.appendChild(item);
    });
  }

  // Función para enviar solicitud de soporte
  document.getElementById('formSoporte').addEventListener('submit', function(e) {
    e.preventDefault();

    const tipo = document.getElementById('tipoProblema').value;
    const descripcion = document.getElementById('descripcionProblema').value;
    const urgencia = document.getElementById('nivelUrgencia').value;

    // Agregar la solicitud al array con estado inicial "pendiente"
    solicitudesSoporte.push({ tipo, descripcion, urgencia, estado: 'pendiente', respuesta: null });
    mostrarHistorial();

    // Limpiar el formulario
    document.getElementById('formSoporte').reset();
    alert("Tu solicitud ha sido enviada y será revisada pronto.");
  });

  // Función para simular respuesta del soporte técnico
  function responderSoporte(index, respuesta) {
    solicitudesSoporte[index].estado = 'resuelto';
    solicitudesSoporte[index].respuesta = respuesta;
    mostrarHistorial();
  }

  // Simulación de respuesta para una solicitud de prueba
  setTimeout(() => {
    if (solicitudesSoporte.length > 0) {
      responderSoporte(0, "Hemos revisado el problema y lo hemos solucionado.");
    }
  }, 5000); // Simulación de respuesta en 5 segundos
</script>

</body>
</html>
<!--// Crear nueva solicitud de soporte
app.post('/api/soporte', (req, res) => {
  const nuevaSolicitud = req.body;
  // Guardar en la base de datos
  res.json({ message: 'Solicitud de soporte enviada' });
});

// Obtener historial de solicitudes
app.get('/api/soporte', (req, res) => {
  // Consultar las solicitudes en la base de datos
  res.json(solicitudes);
});

// Actualizar estado y respuesta
app.put('/api/soporte/:id', (req, res) => {
  const id = req.params.id;
  const { estado, respuesta } = req.body;
  // Actualizar la solicitud en la base de datos
  res.json({ message: 'Solicitud actualizada' });
});
-->